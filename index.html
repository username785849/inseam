<!-- Cart Modal -->
<div id="cart-modal">
  <div id="cart-content">
    <img id="close-cart" src="inseam/red-dot.png" alt="Close" onclick="closeCart()" style="position:absolute; top:10px; left:10px; width:15px; height:15px; cursor:pointer;">
    <img id="cart-header" src="inseam/checkout-black.png" alt="Cart Header" style="width:100%; margin-bottom:20px;" />
    <div id="cart-items"></div>
    <button id="checkout-button" onclick="checkout()">Checkout</button>
  </div>
</div>

<script>
function renderCart() {
  const container = document.getElementById('cart-items');
  container.innerHTML = '';
  if(cart.length === 0) {
    container.innerHTML = '<p>Your cart is empty.</p>';
  } else {
    cart.forEach((item, index) => {
      const div = document.createElement('div');
      div.style.display = 'flex';
      div.style.alignItems = 'center';
      div.style.justifyContent = 'space-between';
      div.style.marginBottom = '15px';

      // Left: Product Image
      const img = document.createElement('img');
      img.src = item.image; // e.g., inseam/product1.png
      img.style.width = '50px';
      img.style.height = '50px';
      img.style.objectFit = 'cover';

      // Center: Product Name + Details
      const details = document.createElement('div');
      details.style.flex = '1';
      details.style.marginLeft = '10px';
      const name = document.createElement('div');
      name.textContent = item.name; // e.g., Test Product
      name.style.fontWeight = 'bold';
      const variants = document.createElement('div');
      variants.textContent = item.details; // e.g., Size S, M, L | 30x30, 30x32
      variants.style.fontSize = '12px';
      variants.style.marginTop = '2px';
      details.appendChild(name);
      details.appendChild(variants);

      // Right: Quantity Dropdown + Price
      const right = document.createElement('div');
      right.style.textAlign = 'right';
      const qtySelect = document.createElement('select');
      for(let i=1;i<=10;i++){
        const option = document.createElement('option');
        option.value = i;
        option.textContent = i;
        if(i===item.quantity) option.selected = true;
        qtySelect.appendChild(option);
      }
      qtySelect.onchange = (e)=>{
        item.quantity = parseInt(e.target.value);
        localStorage.setItem('cart', JSON.stringify(cart));
        price.textContent = '$' + (item.price * item.quantity).toFixed(2);
      }

      const price = document.createElement('div');
      price.textContent = '$' + (item.price * item.quantity).toFixed(2);
      price.style.marginTop = '5px';
      right.appendChild(qtySelect);
      right.appendChild(price);

      div.appendChild(img);
      div.appendChild(details);
      div.appendChild(right);
      container.appendChild(div);
    });
  }
}

function openCart() {
  renderCart();
  document.getElementById('cart-modal').style.display = 'flex';
  // Update header image based on dark mode
  document.getElementById('cart-header').src = document.body.classList.contains('dark-mode') ? 'inseam/checkout-white.png' : 'inseam/checkout-black.png';
}

function closeCart() {
  document.getElementById('cart-modal').style.display = 'none';
}
</script>
